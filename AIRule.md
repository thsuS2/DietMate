# 🛡️ DietMate 프로젝트 AIRule

> **목표**: 모든 협업자가 동일한 규칙과 흐름으로 DietMate 개발을 이어갈 수 있도록 명확한 가이드를 제공합니다.  
> **유지**: 규칙이 변경되거나 새로운 지침이 생기면 이 문서를 가장 먼저 업데이트하세요.

---

## 1. 기본 원칙
- 모든 커뮤니케이션과 코드 주석은 **한글**로 작성합니다.
- 모든 개발은 **step by step**으로 진행하며, 중간 점검 없이 한 번에 많은 변경을 하지 않습니다.
- 사용자 지시를 따르지 못했거나 규칙을 어겼다면 **`.Letter/YYYY-MM-DD.md`** 에 5천자 이상의 반성문을 작성해야 합니다.
- 작업 전에는 반드시 `PROGRESS.md`와 `.Work` 기록을 읽어 현재 상태를 파악합니다.

---

## 2. 작업 프로세스 (4단계)
1. **요구사항 분석**  
   - 사용자의 요청을 꼼꼼히 읽고 필요한 정보를 정리합니다.
2. **구현 전략 제시**  
   - 실행 계획을 사용자의 말투/스타일에 맞춰 간단명료하게 공유하고 **승인 대기**합니다.
3. **구현** (승인 후)  
   - 디자인 시스템과 공통 컴포넌트를 활용하여 개발합니다.  
   - 필요한 경우만 도구(툴)를 사용하며, 터미널 명령은 실행 전 사용자에게 위임 여부를 확인합니다.
4. **작업 기록**  
   - `.Work/YYYY-MM-DD.md`에 작업 내역, 이슈, 다음 계획을 기록합니다.  
   - `PROGRESS.md`/`AIRule.md`에 반영해야 할 변경사항을 업데이트합니다.

---

## 3. 문서 관리 규칙
- **`PROGRESS.md`**  
  - 프로젝트 진행 상황, 남은 작업, 중요 주의사항을 추적합니다.  
  - 새로운 기능 구현, 우선순위 변경, 중요 이슈 발생 시 반드시 업데이트합니다.
- **`AIRule.md` (본 문서)**  
  - 규칙이 추가/변경되면 즉시 수정하고 커밋 메시지에 명시합니다.  
  - 다른 문서에 중복된 규칙이 생기면 이 문서를 기준으로 정리합니다.
- **`.Work/YYYY-MM-DD.md`**  
  - 하루에 한 파일씩 작성합니다.  
  - `목표 → 진행 내역 → 문제/해결 → 코드 통계 → 커밋 내역 → 다음 계획 → 요약` 순으로 기록합니다.
- **`.Letter/YYYY-MM-DD.md`**  
  - 규칙 위반이나 사용자 요구 미흡 시 작성합니다.  
  - 이전 반성문을 참고해 같은 실수를 반복하지 않습니다.

---

## 4. Git & 협업 규칙
- **원격 저장소**: `git@github-personal:thsuS2/DietMate.git` (SSH)
- 커밋 메시지는 영어 `type: subject` 형식을 사용합니다.  
  예) `feat: Add recurring transaction store`  
- 커밋 전 확인 사항  
  - `PROGRESS.md`, `AIRule.md`, `.Work` 최신 여부  
  - 변경 파일 검토 (디자인 시스템 사용 여부, 불필요한 콘솔 제거)  
  - 필요 시 `read_lints`로 린트 확인
- **Git 명령 실행 전 사용자에게 보고**하고 위임 여부를 확인합니다.

---

## 5. 빌드 & 테스트 규칙
- **Android 에뮬레이터**: `Pixel_9_Pro_XL_2 (API 35)`만 사용합니다.
- **Metro 포트**: 항상 `8082`를 사용합니다.
- 실행 예시 (사용자에게 안내):
  ```
  export npm_config_cache=/Users/jisoo/Soo/.npm-temp-cache
  cd /Users/jisoo/Soo/DietMate
  npx react-native run-android --deviceId emulator-5554 --port 8082
  ```
- 에뮬레이터가 여러 대 켜져 있으면 빌드 실패 가능성이 있으니, 다른 기기를 종료하도록 안내합니다.

---

## 6. 개발 지침
- 가능한 한 **기존 공통 컴포넌트**(`src/components/common`)와 **차트 컴포넌트**를 재사용합니다.
- 색상은 `src/theme/colors.js`, 타이포그래피는 `src/theme/typography.js`, 간격은 `src/theme/spacing.js`를 참조합니다.
- 새로운 기능은 `useRecordStore`, `useSettingsStore`, `useWalletStore` 등 Zustnd 스토어를 통해 관리합니다.
- 데이터 포맷/시간 계산은 `src/utils/date.js`, 스토리지 로직은 `src/utils/storage.js`에 통일합니다.
- 알림 기능은 `src/utils/notify.js`의 `scheduleAllNotifications`를 통해 제어합니다.

---

## 7. 터미널 & 도구 사용 원칙
- 사용자에게 먼저 **명령어와 목적을 제안**한 뒤, 직접 실행할지 확인합니다.  
  - 사용자가 직접 실행하기를 원할 경우, 단계별 설명만 제공합니다.  
  - “Agent가 실행해줘”라고 명시한 경우에만 `run_terminal_cmd`를 사용합니다.
- 파일 읽기는 `read_file`, 검색은 `codebase_search`/`grep`, 수정은 `apply_patch`/`edit_file`을 우선 사용합니다.

---

## 8. 커뮤니케이션
- 진행 상황, 막힌 부분, 가정은 반드시 사용자에게 공유합니다.
- 단순한 요청(예: 현재 시간 확인)은 가능한 한 빠르게 처리하고, 필요 시 명령어를 안내합니다.
- 다음 단계 제안 시 사용자 스타일(친근하지만 단호한 톤)을 맞춰 답변합니다.

---

## 9. 규칙 변경 시 체크리스트
- [ ] 사용자 지시와 충돌하지 않는지 확인  
- [ ] 관련 문서 (`PROGRESS.md`, `.Work`) 업데이트  
- [ ] 커밋 메시지에 규칙 변경사항 명시  
- [ ] 사용자에게 변경 내용을 보고

---

**최종 업데이트**: 2025-11-13  
**작성자**: AI Assistant  
**상태**: ✅ 규칙 최신 유지 중

